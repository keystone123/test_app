<!DOCTYPE html>
<!--HTML5 doctype-->
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <link href="css/icons.css" rel="stylesheet" type="text/css" />
        <link href="css/af.ui.css" rel="stylesheet" type="text/css" />
        <link href="css/style.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDsujp7vdVRPj7B5pZwdr4ZShABgVdNrCU&sensor=true"></script>
        <script type="text/javascript" charset="utf-8" src="http://localhost:58888/_appMobi/appmobi.js"></script>
        <script src="js/appframework.ui.min.js"></script>   
        <script type="text/javascript" language="javascript">

            //Device is ready
            function onDeviceReady() {
                //hide splash screen now that our app is ready to run
                AppMobi.device.hideSplashScreen();

                //Launch App Framework
                setTimeout(function() {
                    $.ui.launch();
                }, 50);
            }

            //App Framework Config
            $.ui.autoLaunch = false;
            $.ui.useOSThemes = true;
            $.ui.blockPageScroll();
            $.ui.backButtonText = "Back";
            $(document).ready(function() {
                if ($.ui.useOSThemes && !$.os.ios && $("#afui").get(0).className !== "ios")
                    $("#afui").removeClass("ios");
            });

            //Initial event handler
            document.addEventListener("appMobi.device.ready", onDeviceReady, false);

            function getLocation() {
                navigator.geolocation.getCurrentPosition(onGeoSuccess, onError);
            }

            function onGeoSuccess(position) {
                console.log('Get Coords: Success');
                var latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                //Select map options
                var mapOptions = {
                    center: latLng,
                    panControl: false,
                    zoomControl: true,
                    zoom: 16,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById('map_placer'), mapOptions);
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map
                });
            }

            function onError(error) {
                console.log('Get Coords: Fail');
                var errString = '';
                // Check to see if we have received an error code
                if (error.code) {
                    // If we have, handle it by case
                    switch (error.code)
                    {
                        case 1: //Permission Denied
                            errString =
                                    'Can not fetch the location information ' +
                                    'because the device does not have permission.';
                            break;
                        case 2: //Position is unavailable
                            errString =
                                    'Can not fetch the location information ' +
                                    'because the device location could not ' +
                                    'be determined.';
                            break;
                        case 3: //Timeout Error
                            errString =
                                    'Can not fetch the location within the ' +
                                    'specified time allocation.';
                            break;
                        default: //Unknown
                            errString =
                                    'Can not fetch the location of the ' +
                                    'device because of an unknown error.';
                            break;
                    }
                }
            }

//Display errors in div
            var element = document.getElementById('map_placer');
            element.innerHTML = errString;
        </script>
    </head>
    <body>
        <div id="afui" class='ios'>
            <div id="header"></div><!--/header-->
            <div id="content" style="">
                <!--Homepage-->
                <div class="panel" title="Main" data-nav="nav_0" id="page_0" data-appbuilder-object="page" style="">
                    <div class="container" style="width:100%" data-appbuilder-object="container" data-position="static">
                        <ul class="list" data-appbuilder-object="list" data-position="static">
                            <li><a href="#geolocation">Geolocation</a></li>
                            <li><a href="#camera">Camera</a></li>
                        </ul>            
                    </div><!--/container-->
                </div><!--/main-->

                <!--Geolocation-->
                <div class="panel" title="Geolocation" data-nav="nav_0" id="geolocation" data-appbuilder-object="page" data-load="getLocation" style="height:500px;">     
                    <div id="map_placer" style="width:350px;height:100%;text-align:center;"><p>Determining Your Location</p></div>                   
                </div><!--/geolocation-->


            </div><!--/content-->

            <div id="navbar">
                <!--Footer Icons-->
                <a href="#page_0" class="icon home">Home</a>
                <a href="#geolocation" class="icon location">GeoLocation</a>
                <a href="#camera" class="icon camera">Camera</a>
            </div>          
        </div><!--/aufi-->
    </body>
</html>